<!doctype html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.cdnfonts.com/css/ocr-a-std" rel="stylesheet">
    <style>
        :root {
          --slide-down-time: 4000;
        }

        body {
            height: calc(100vh - 10px);
            border: 5px solid lightgray;
            margin: 0;
        }

        .overlay {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            background: #03A062;
            opacity: .2;
            filter: alpha(opacity=20) blur(.8px);
            background: linear-gradient(to top, #000000, #000000, #333333, #03A062);
            background-size: cover;
            background-size: 100% 4px;
        }

        .button-bar {
            display: flex;
            justify-content: start;
            margin-top: -10px;

            .button-group {
                margin-left: 30px;
            }
        }

        .download-block {
            position: absolute;
            top: 25px;
            right: 300px;
            min-width: 450px;
            border: 2px solid black;
            background-color: #172E28;
            font-family: 'OCR A Std', sans-serif;
            font-size: 18px;
            line-height: 1;
            color: white;
        }

        .searching-block {
            position: absolute;
            top: 45px;
            left: 100px;
            z-index: 100;
            border: 4px solid #57976F;
            min-width: 360px;
            padding: 4px 15px;
            background-color: #18302A;
            font-family: 'OCR A Std', sans-serif;
            font-size: 22px;
            line-height: 1.6;
            letter-spacing: 4.2px;
            color: #57976F;
        }

        .results-block {
            position: relative;
            padding: 50px;
        }

        .news-article {
            top: 50px;
            max-width: 700px;
            max-height: 900px;
            overflow: hidden;
            padding: 0 10px 15px;
            background-color: #f4f3ef;
            filter: blur(.8px);

            .title {
                font-size: 40px;
            }

            .content {
                font-size: 25px;
            }

            &.arabic {
                position: absolute;
                top: 80px;
                right: 45px;
                max-width: 200px;
                direction: rtl;
                unicode-bidi: bidi-override;

                .title {
                    font-size: 20px;
                }

                .content {
                    font-size: 16px;
                }
            }
        }

        .news-article,
        .image-block {
            position: absolute;
            display: none;
            border: 2px solid black;
        }

        .image-block {
            top: 100px;
            left: 750px;
            z-index: 10;
            width: 500px;
            img {
                display: block;
                width: 100%;
                filter: brightness(60%) saturate(80%) grayscale(1) blur(1px) contrast(1.4);
            }
        }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <div class="button-bar">
        <div class="button-group group-1">
            <button class="">
                A
            </button>
            <button class="">
                B
            </button>
        </div>

        <div class="button-group group-2">
            <button class="">
                C
            </button>
            <button class="">
                D
            </button>
            <button class="">
                C
            </button>
            <button class="">
                D
            </button>
        </div>

        <div class="button-group group-3">
            <button class="">
                E
            </button>
            <button class="">
                F
            </button>
        </div>

        <div class="button-group group-4">
            <button class="">
                G
            </button>
            <button class="">
                H
            </button>
        </div>
    </div>

    <div class="download-block">
        <span>Download</span>
    </div>

    <div class="searching-block">
        <span>Searching...</span>
    </div>

    <div class="results-block">
        <div class="news-article english">
            <h2 class="title"></h2>
            <p class="content"></p>
        </div>

        <div class="image-block english">
            <img src="" alt="">
        </div>

        <div class="news-article arabic">
            <h2 class="title"></h2>
            <p class="content"></p>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        var bodyStyles = window.getComputedStyle(document.body);
        var slideDownTime = bodyStyles.getPropertyValue('--slide-down-time');


        $(document).ready(function() {
            handleArticles();

            setTimeout(function() {
                handleArticlesArabic();
            }, 4500);
        });

        async function handleArticles() {
            while (true) {
                // let feed = await parseRSS('https://feeds.npr.org/1001/rss.xml');
                let feed = await parseRSS('https://feeds.bbci.co.uk/news/world/rss.xml');

                for (let i in feed.items) {
                    await showArticle(feed.items[i], 'english');
                }
            }
        }

        async function handleArticlesArabic() {
            // arabic feed
            // https://www.emaratalyoum.com/1.533091?ot=ot.AjaxPageLayout
            let feedArabic = await parseRSS('https://www.emaratalyoum.com/1.533091?ot=ot.AjaxPageLayout');

            while (true) {
                for (let i in feedArabic.items) {
                    await showArticle(feedArabic.items[i], 'arabic');
                }
            }
        }

        function parseRSS(url) {
            return $.get('https://api.rss2json.com/v1/api.json?rss_url=' + url, function (feed) {
                return feed;
            });
        }

        function showArticle(article, language) {
            if (typeof language !== 'undefined') {
                language = '.' + language;
            }
            else {
                language = '';
            }

            return new Promise((resolve, reject) => {
                $(".news-article"+ language).hide().css('border-bottom', 'none');
                $(".image-block"+ language).hide().css('border-bottom', 'none');
                $(".news-article"+ language +" .title").html(article.title);
                $(".news-article"+ language +" .content").html(article.description);
                $(".news-article"+ language +" img").remove();
                $(".news-article"+ language +" a").remove();
                if (article.thumbnail) {
                    $(".image-block"+ language +" img").attr('src', article.thumbnail);
                }
                
                $(".news-article"+ language).slideDown(parseInt(slideDownTime), function() {
                    $(this).css('border-bottom', '');
                });

                if (article.thumbnail) {
                    setTimeout(function () {
                        $(".image-block"+ language).slideDown(parseInt(slideDownTime), function() {
                            $(this).css('border-bottom', '');
                        });
                    }, slideDownTime - 1200)
                }

                setTimeout(function () {
                    resolve();
                }, 20000);
            });
        }
    </script>
</body>
</html>